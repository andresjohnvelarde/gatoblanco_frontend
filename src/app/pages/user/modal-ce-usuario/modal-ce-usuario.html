<div class="modal-overlay">
    <div class="modal-container">
        <div class="modal-header">
            <h2>{{ usuarioParaEditar ? 'MODIFICAR USUARIO' : 'CREAR NUEVO USUARIO' }}</h2>
            <button class="btn-close" (click)="close.emit()">×</button>
        </div>

        <form [formGroup]="usuarioForm" (ngSubmit)="onSubmit()" class="modal-body">

            <div class="form-grid">
                <div class="form-group full">
                    <label>Nombre(s) del usuario</label>
                    <input type="text" formControlName="nombres" placeholder="Ej: Juan Carlos">
                </div>

                <div class="form-group full">
                    <label>Apellidos del usuario</label>
                    <input type="text" formControlName="apellidos" placeholder="Ej: Pérez Gómez">
                </div>

                <div class="form-group full">
                    <label>Username del usuario (para login)</label>
                    <input type="text" formControlName="username" placeholder="Ej: juancarlos123">
                </div>

                <div class="form-group full password-group">
                    <label>Contraseña</label>
                    <div class="password-wrapper">
                        <input [type]="showPassword ? 'text' : 'password'" formControlName="password"
                            placeholder="********">
                        <button type="button" class="btn-eye" (click)="togglePassword()">
                            <i [class]="showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                        </button>
                    </div>
                </div>

                <div class="form-group full password-group">
                    <label>Repetir contraseña</label>
                    <div class="password-wrapper">
                        <input [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmPassword"
                            placeholder="********">
                        <button type="button" class="btn-eye" (click)="toggleConfirmPassword()">
                            <i [class]="showConfirmPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                        </button>
                    </div>
                </div>
            </div>


            <div class="modal-footer">
                <button type="button" class="btn-cancel" (click)="close.emit()">CANCELAR</button>
                <button type="submit" class="btn-save" [disabled]="usuarioForm.invalid || isSubmitting">
                    {{ isSubmitting ? 'PROCESANDO...' : (usuarioParaEditar ? 'ACTUALIZAR' : 'GUARDAR') }}
                </button>
            </div>
        </form>
    </div>
</div>